# IDE 打包成功说明

## 打包结果

✅ **打包成功完成！**

可执行文件位置：`kos-tl-ide/dist-release/win-unpacked/KOS-TL IDE.exe`

文件大小：约 172 MB

## 打包信息

- **平台**: Windows x64
- **格式**: 目录格式 (dir) - 便携式应用，无需安装
- **输出目录**: `dist-release/win-unpacked/`
- **代码签名**: 已禁用（避免权限问题）

## 运行方式

### 方式一：直接运行
1. 进入 `dist-release/win-unpacked/` 目录
2. 双击 `KOS-TL IDE.exe` 启动 IDE

### 方式二：创建快捷方式
1. 右键点击 `KOS-TL IDE.exe`
2. 选择"创建快捷方式"
3. 将快捷方式移动到桌面或开始菜单

## 注意事项

### 代码签名警告
打包过程中会出现代码签名工具解压失败的错误，这是正常的：
- 错误信息：`ERROR: Cannot create symbolic link : 客户端没有所需的权限`
- **不影响使用**：可执行文件已成功生成，可以正常运行
- **原因**：Windows 上创建符号链接需要管理员权限，但代码签名已禁用，不影响功能

### 编译器路径
IDE 需要编译器才能进行编译和类型检查：
- 开发环境：编译器应在 `compiler/build/bin/kos-tl-compiler.exe`
- 打包环境：编译器应在 `resources/compiler/kos-tl-compiler.exe`（需要手动复制）

### 文件结构
```
dist-release/win-unpacked/
├── KOS-TL IDE.exe          # 主程序
├── resources/
│   └── app.asar           # 应用资源（打包的代码）
├── locales/                # 语言文件
└── ...                     # Electron 运行时文件
```

## 功能验证

打包后的 IDE 应支持以下功能：

1. ✅ **文件操作**
   - 打开文件（Ctrl+O）
   - 保存文件（Ctrl+S）
   - 打开工作区

2. ✅ **编辑功能**
   - 代码编辑（Monaco Editor）
   - 语法高亮
   - 代码补全

3. ✅ **编译和运行**
   - 编译 KOS-TL 文件（F5）
   - 类型检查（F6）
   - 查看编译输出

4. ✅ **菜单功能**
   - 完整的菜单栏（文件、编辑、视图、运行、工具、帮助）
   - 快捷键支持

## 已知问题

1. **代码签名工具解压失败**：不影响使用，可忽略
2. **编译器路径**：需要确保编译器已构建并放在正确位置

## 下一步

1. 测试 IDE 的各项功能
2. 如有问题，查看控制台日志（Ctrl+Shift+I）
3. 如需分发，可以将整个 `win-unpacked` 目录打包为 ZIP 文件

## 重新打包

如果需要重新打包，运行以下命令：

```powershell
cd kos-tl-ide
npm run build
$env:CSC_IDENTITY_AUTO_DISCOVERY='false'
$env:SKIP_NOTARIZATION='true'
npx electron-builder --win --publish=never --config.directories.output=dist-release
```

注意：打包前请关闭所有正在运行的 IDE 实例，避免文件被占用。



