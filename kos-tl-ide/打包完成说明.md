# KOS-TL IDE 打包说明

## 当前状态

构建过程已成功完成，但打包为安装程序时遇到了代码签名工具下载问题（网络连接问题）。不过，**可执行文件已经生成**在 `release/win-unpacked/` 目录中。

## 使用已构建的可执行文件

### 方式1: 直接使用未打包版本

可执行文件位于：
```
kos-tl-ide/release/win-unpacked/KOS-TL IDE.exe
```

直接运行这个文件即可使用 IDE。

### 方式2: 手动创建便携版

1. 将 `release/win-unpacked/` 目录复制到任意位置
2. 重命名为 `KOS-TL IDE` 或你喜欢的名称
3. 运行其中的 `KOS-TL IDE.exe`

### 方式3: 使用 dir 格式（推荐）

修改 `package.json` 中的打包配置：

```json
"win": {
  "target": [
    {
      "target": "dir",
      "arch": ["x64"]
    }
  ]
}
```

然后运行：
```bash
npm run package:win
```

这会生成一个目录，包含所有必需的文件，可以直接运行。

## 解决代码签名问题

如果将来需要创建安装程序，可以：

1. **禁用代码签名**（开发/测试用）:
   - 设置环境变量: `CSC_IDENTITY_AUTO_DISCOVERY=false`
   - 或在配置中设置 `"sign": null`

2. **使用 dir 格式**（不需要签名）:
   - 如上所述，使用 `dir` 目标

3. **配置代码签名**（生产环境）:
   - 需要有效的代码签名证书
   - 配置证书路径和密码

## 当前可用的文件

- ✅ 主进程代码: `dist/main/`
- ✅ 渲染进程代码: `dist/renderer/`
- ✅ 可执行文件: `release/win-unpacked/KOS-TL IDE.exe`（如果存在）

## 验证构建

运行以下命令验证构建：

```powershell
cd kos-tl-ide
.\release\win-unpacked\KOS-TL IDE.exe
```

如果文件不存在，可以手动运行 electron：

```powershell
cd kos-tl-ide
.\node_modules\.bin\electron.cmd dist/main/main.js
```

## 下一步

1. 测试可执行文件是否正常工作
2. 如果需要安装程序，解决代码签名问题或使用 dir 格式
3. 添加应用图标（创建 `assets/icon.ico`）
4. 配置编译器路径（如果需要）

## 注意事项

- 当前构建不包含编译器，需要在设置中配置编译器路径
- 如果遇到路径问题，检查 `main/ipc-handlers.ts` 中的编译器路径配置
- 首次运行可能需要一些时间来加载 Monaco Editor





